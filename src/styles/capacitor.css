/* Capacitor, iOS, and Android specific styles */

/* Safe area support for iOS notches and home indicators, Android navigation bar */
.safe-area {
  padding-top: env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

.safe-area-top {
  padding-top: max(0.875rem, env(safe-area-inset-top));
}

.safe-area-bottom {
  padding-bottom: max(0.5rem, env(safe-area-inset-bottom));
}

.safe-area-left {
  padding-left: env(safe-area-inset-left);
}

.safe-area-right {
  padding-right: env(safe-area-inset-right);
}

/* Prevent iOS bounce/overscroll */
.no-bounce {
  overscroll-behavior: none;
  -webkit-overflow-scrolling: touch;
}

/* Fix for iOS viewport height issues */
.ios-viewport-fix {
  min-height: 100vh;
  min-height: -webkit-fill-available;
}

/* Touch-friendly interactions */
.touch-manipulation {
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
}

/* Prevent text selection on long press (except inputs) */
.no-select {
  -webkit-user-select: none;
  user-select: none;
  -webkit-touch-callout: none;
}

/* Allow text selection in specific elements */
.select-text {
  -webkit-user-select: auto;
  user-select: auto;
}

/* iOS-specific input fixes */
@supports (-webkit-touch-callout: none) {
  /* Prevent zoom on input focus in iOS Safari */
  input[type="text"],
  input[type="email"],
  input[type="password"],
  input[type="number"],
  input[type="tel"],
  input[type="url"],
  input[type="search"],
  textarea,
  select {
    font-size: 16px !important;
  }

  /* Fix for iOS input shadow */
  input,
  textarea,
  select {
    -webkit-appearance: none;
    appearance: none;
    border-radius: 0;
  }
}

/* Fix for iOS fixed positioning issues */
.fixed-ios {
  position: fixed;
  /* Use transform to create a new stacking context */
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
}

/* Smooth scrolling for iOS */
.smooth-scroll {
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
}

/* Prevent iOS from highlighting elements on tap */
* {
  -webkit-tap-highlight-color: transparent;
}

/* Fix for iOS status bar spacing */
.status-bar-spacer {
  height: env(safe-area-inset-top);
  background-color: var(--primary);
}

/* Bottom navigation safe area */
.bottom-nav-safe {
  padding-bottom: max(0.5rem, env(safe-area-inset-bottom));
}

/* Full screen safe area (for modals, etc.) */
.fullscreen-safe {
  padding-top: env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

/* iOS specific button styles */
.ios-button {
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
  cursor: pointer;
}

/* Prevent iOS from showing callout menu on long press */
.no-callout {
  -webkit-touch-callout: none;
}

/* Fix for iOS input focus zoom */
@media screen and (max-width: 768px) {
  input,
  select,
  textarea {
    font-size: 16px !important;
  }
}

/* iOS scroll momentum */
.momentum-scroll {
  -webkit-overflow-scrolling: touch;
  overflow-y: auto;
}

/* Fix for iOS viewport units */
.vh-ios {
  height: 100vh;
  height: -webkit-fill-available;
}

.min-vh-ios {
  min-height: 100vh;
  min-height: -webkit-fill-available;
}

/* Android-specific optimizations */
@supports (not (-webkit-touch-callout: none)) {
  /* Android-specific styles (not iOS) */
  
  /* Android viewport height fix */
  .android-viewport-fix {
    min-height: 100vh;
    min-height: 100dvh; /* Dynamic viewport height for Android */
  }

  /* Android navigation bar safe area */
  .android-nav-safe {
    padding-bottom: max(0.5rem, env(safe-area-inset-bottom));
  }

  /* Android status bar safe area */
  .android-status-safe {
    padding-top: max(0.875rem, env(safe-area-inset-top));
  }

  /* Android-specific input fixes */
  input[type="text"],
  input[type="email"],
  input[type="password"],
  input[type="number"],
  input[type="tel"],
  input[type="url"],
  input[type="search"],
  textarea,
  select {
    /* Prevent zoom on input focus in Android Chrome */
    font-size: 16px !important;
    /* Remove Android input highlight */
    -webkit-tap-highlight-color: transparent;
    /* Remove Android input outline */
    outline: none;
  }

  /* Android button optimizations */
  button,
  [role="button"],
  a {
    /* Remove Android tap highlight */
    -webkit-tap-highlight-color: transparent;
    /* Optimize touch response */
    touch-action: manipulation;
  }

  /* Android scroll optimizations */
  .android-scroll {
    /* Smooth scrolling for Android */
    -webkit-overflow-scrolling: touch;
    /* Prevent overscroll glow */
    overscroll-behavior: none;
    /* Hardware acceleration */
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
  }

  /* Android fixed positioning fix */
  .fixed-android {
    position: fixed;
    /* Use transform to create a new stacking context */
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
    /* Prevent Android from moving fixed elements */
    will-change: transform;
  }
}

/* Cross-platform optimizations (iOS and Android) */
.mobile-viewport-fix {
  min-height: 100vh;
  min-height: 100dvh; /* Dynamic viewport height */
  min-height: -webkit-fill-available; /* iOS fallback */
}

/* Android Chrome specific fixes */
@media screen and (max-width: 768px) {
  /* Prevent zoom on input focus for all mobile browsers */
  input,
  select,
  textarea {
    font-size: 16px !important;
  }
}

/* Android navigation bar color support */
@media (prefers-color-scheme: dark) {
  /* Dark mode adjustments for Android */
  .android-dark-mode {
    background-color: var(--background);
    color: var(--foreground);
  }
}

/* Android ripple effect prevention */
.no-ripple {
  -webkit-tap-highlight-color: transparent;
  tap-highlight-color: transparent;
}

/* Android text selection optimization */
.android-select {
  -webkit-user-select: text;
  user-select: text;
  -webkit-touch-callout: default;
}

/* Android long press menu prevention */
.no-context-menu {
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  user-select: none;
}

/* Android hardware acceleration */
.hardware-accelerated {
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
  will-change: transform;
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}
